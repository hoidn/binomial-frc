# frc

Utilities for single-image Fourier Ring Correlation (FRC) split construction.

## Installation
```bash
pip install -e .
```

## API
- `center_crop_even_square(arr)`: center-crop to an even square canvas.
- `split_diagonal_interleaved(arr)`: diagonal interleaved split into two half-images.
- `split_binomial_thinned(arr, rng_seed=None, count_scale=4096.0)`: deterministic binomial split.
- `first_below_threshold(curve, threshold)`: first index where a curve falls below threshold.

## Example
```python
import numpy as np

from frc.single_image_frc import (
    center_crop_even_square,
    split_binomial_thinned,
)

img = np.random.rand(96, 96).astype(np.float32)
img = center_crop_even_square(img)

half_a, half_b = split_binomial_thinned(img, rng_seed=123, count_scale=4096.0)
```

## Plot Artifacts
The following plots are generated by the external alignment sweep and saved under `plots/`.

### single_frc50_amp trend
![single_frc50_amp trend](./plots/trend_single_frc50_amp_vs_blur.png)

### Scatter (single_frc50_amp vs ssim_amp)
![scatter](./plots/scatter_single_frc50_amp_vs_ssim_amp.png)

### Scatter by degradation level
![scatter by level](./plots/scatter_single_frc50_amp_vs_ssim_amp_by_level.png)

### single_frc1over7_amp vs GT frc1over7_amp (by degradation level)
![scatter frc1over7](./plots/scatter_single_frc1over7_amp_vs_gt_frc1over7_amp_by_level.png)

## Data Artifacts
- `raw_metrics.csv`
- `summary.json`
